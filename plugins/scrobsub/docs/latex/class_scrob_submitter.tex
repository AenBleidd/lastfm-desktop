\section{ScrobSubmitter Class Reference}
\label{class_scrob_submitter}\index{ScrobSubmitter@{ScrobSubmitter}}
{\tt \#include $<$ScrobSubmitter.h$>$}

\subsection*{Public Types}
\begin{CompactItemize}
\item 
enum {\bf Encoding} \{ \textbf{ISO\_\-8859\_\-1}, 
\textbf{UTF\_\-8}
 \}
\item 
typedef void($\ast$) {\bf StatusCallback} (int reqId, bool error, std::string msg, void $\ast$userData)
\end{CompactItemize}
\subsection*{Public Member Functions}
\begin{CompactItemize}
\item 
{\bf ScrobSubmitter} ()
\item 
virtual {\bf $\sim$ScrobSubmitter} ()
\item 
void {\bf Init} (const std::string \&pluginId, {\bf StatusCallback} callback, void $\ast$userData)
\item 
void {\bf Term} ()
\item 
int {\bf Start} (std::string artist, std::string track, std::string album, std::string mbId, int length, std::string filename, {\bf Encoding} encoding=UTF\_\-8)
\item 
int {\bf Stop} ()
\item 
int {\bf Pause} ()
\item 
int {\bf Resume} ()
\item 
std::string {\bf GetVersion} ()
\end{CompactItemize}
\subsection*{Static Public Member Functions}
\begin{CompactItemize}
\item 
static std::string {\bf GetLogPath} ()
\end{CompactItemize}


\subsection{Detailed Description}
Class for submitting tracks to the Last.fm client. It communicates with the client via a local socket.

To use it, call Init on player startup passing the required parameters. This will launch the Last.fm client if it isn't already runnning and initialise the socket communication and worker thread.

Then simply call functions Start, Stop, Pause and Resume in response to player events to communicate these events to the Last.fm client. They all operate asynchronously, i.e. they will return straight away so as to prevent hanging the calling thread if an operation takes some time. This shouldn't normally be the case but if the client is not running, it might take some time to discover that the socket is not open. The functions will return a request ID uniquely identifying the command just sent. When the request is finished, the status callback will be called with the ID as a parameter and a message of either \char`\"{}OK\char`\"{} or a description of the error if one occurred.

It's important to call Term at shutdown to clean up all resources properly. 



\subsection{Member Typedef Documentation}
\index{ScrobSubmitter@{ScrobSubmitter}!StatusCallback@{StatusCallback}}
\index{StatusCallback@{StatusCallback}!ScrobSubmitter@{ScrobSubmitter}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}typedef void($\ast$) {\bf ScrobSubmitter::StatusCallback}(int reqId, bool error, std::string msg, void $\ast$userData)}\label{class_scrob_submitter_1f22481471ffffa3d1677a81303c3ff1}


Callback function type for status reporting.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[\mbox{$\leftarrow$} {\em reqId}]The request ID the message is in regards to. \item[\mbox{$\leftarrow$} {\em error}]True if an error occurred. \item[\mbox{$\leftarrow$} {\em msg}]Status message. \item[\mbox{$\leftarrow$} {\em userData}]The user data passed to Init. \end{description}
\end{Desc}


\subsection{Member Enumeration Documentation}
\index{ScrobSubmitter@{ScrobSubmitter}!Encoding@{Encoding}}
\index{Encoding@{Encoding}!ScrobSubmitter@{ScrobSubmitter}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}enum {\bf ScrobSubmitter::Encoding}}\label{class_scrob_submitter_743e06902c0318679a3d272f2c0b606a}


Text encoding used for track submissions. 

\subsection{Constructor \& Destructor Documentation}
\index{ScrobSubmitter@{ScrobSubmitter}!ScrobSubmitter@{ScrobSubmitter}}
\index{ScrobSubmitter@{ScrobSubmitter}!ScrobSubmitter@{ScrobSubmitter}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}ScrobSubmitter::ScrobSubmitter ()}\label{class_scrob_submitter_bf93469f6106cafa21dc8c093629e13b}


Constructor \index{ScrobSubmitter@{ScrobSubmitter}!~ScrobSubmitter@{$\sim$ScrobSubmitter}}
\index{~ScrobSubmitter@{$\sim$ScrobSubmitter}!ScrobSubmitter@{ScrobSubmitter}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}ScrobSubmitter::$\sim$ScrobSubmitter ()\hspace{0.3cm}{\tt  [virtual]}}\label{class_scrob_submitter_bc8808b8c6629975188417f5fdbc8856}


Destructor 

\subsection{Member Function Documentation}
\index{ScrobSubmitter@{ScrobSubmitter}!Init@{Init}}
\index{Init@{Init}!ScrobSubmitter@{ScrobSubmitter}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void ScrobSubmitter::Init (const std::string \& {\em pluginId}, {\bf StatusCallback} {\em callback}, void $\ast$ {\em userData})}\label{class_scrob_submitter_a35102b0accdf8f2edc2228da1cf47ff}


Call this to initialise the class. Must be called before any tracks are submitted or things won't work. This function will also launch Last.fm if it isn't running.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[\mbox{$\leftarrow$} {\em pluginId}]Three-letter plugin code as assigned by Last.fm. Contact russ at last.fm to get one for your plugin. \item[\mbox{$\leftarrow$} {\em callback}]Function pointer for reporting result status of asynchronous operations. \item[\mbox{$\leftarrow$} {\em userData}]Pointer that will be passed back through the callback. Use for \char`\"{}this\char`\"{} pointer. \end{description}
\end{Desc}
\index{ScrobSubmitter@{ScrobSubmitter}!Term@{Term}}
\index{Term@{Term}!ScrobSubmitter@{ScrobSubmitter}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void ScrobSubmitter::Term ()}\label{class_scrob_submitter_9be66164b646c08bdf2f183af7f8a115}


Call this to terminate. Must be called in order for the socket thread to be shut down properly. \index{ScrobSubmitter@{ScrobSubmitter}!Start@{Start}}
\index{Start@{Start}!ScrobSubmitter@{ScrobSubmitter}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int ScrobSubmitter::Start (std::string {\em artist}, std::string {\em track}, std::string {\em album}, std::string {\em mbId}, int {\em length}, std::string {\em filename}, {\bf Encoding} {\em encoding} = {\tt UTF\_\-8})}\label{class_scrob_submitter_2cc75a9528f6ba5feb79f22223945d33}


Sends a START command to client. All parameter strings are treated as standard char strings.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[\mbox{$\leftarrow$} {\em artist}]Name of artist. \item[\mbox{$\leftarrow$} {\em track}]Name of track. \item[\mbox{$\leftarrow$} {\em album}]Name of album. \item[\mbox{$\leftarrow$} {\em mbId}]Musicbrainz ID if present. \item[\mbox{$\leftarrow$} {\em length}]Length of track in seconds. \item[\mbox{$\leftarrow$} {\em filename}]Full path to the file on the disk. \item[\mbox{$\leftarrow$} {\em encoding}]Text encoding specifying how to interpret the characters in the strings passed in.\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]A unique request ID. \end{Desc}
\index{ScrobSubmitter@{ScrobSubmitter}!Stop@{Stop}}
\index{Stop@{Stop}!ScrobSubmitter@{ScrobSubmitter}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int ScrobSubmitter::Stop ()}\label{class_scrob_submitter_566a45131fe2b1420fe01281e0590722}


Sends a STOP command to client. Call this both for stop and when a song plays to the end.

\begin{Desc}
\item[Returns:]A unique request ID. \end{Desc}
\index{ScrobSubmitter@{ScrobSubmitter}!Pause@{Pause}}
\index{Pause@{Pause}!ScrobSubmitter@{ScrobSubmitter}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int ScrobSubmitter::Pause ()}\label{class_scrob_submitter_96b594065992db4a25d5433ae6847997}


Sends a PAUSE command to client. Use this only for pause.

\begin{Desc}
\item[Returns:]A unique request ID. \end{Desc}
\index{ScrobSubmitter@{ScrobSubmitter}!Resume@{Resume}}
\index{Resume@{Resume}!ScrobSubmitter@{ScrobSubmitter}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int ScrobSubmitter::Resume ()}\label{class_scrob_submitter_eaa7bc7179e4a6c76bbb2a8ca7030aaf}


Sends a RESUME command to client. Should only be used following a preceding START-PAUSE sequence to resume a paused track.

\begin{Desc}
\item[Returns:]A unique request ID. \end{Desc}
\index{ScrobSubmitter@{ScrobSubmitter}!GetVersion@{GetVersion}}
\index{GetVersion@{GetVersion}!ScrobSubmitter@{ScrobSubmitter}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}string ScrobSubmitter::GetVersion ()}\label{class_scrob_submitter_22eaa73467e48cb23d69e4191b48c9e8}


Get ScrobSub version.

\begin{Desc}
\item[Returns:]Version string. \end{Desc}
\index{ScrobSubmitter@{ScrobSubmitter}!GetLogPath@{GetLogPath}}
\index{GetLogPath@{GetLogPath}!ScrobSubmitter@{ScrobSubmitter}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}string ScrobSubmitter::GetLogPath ()\hspace{0.3cm}{\tt  [static]}}\label{class_scrob_submitter_2c86769b762ee18c647cd5a6645a579d}


Returns a suitable directory for putting log files in. Normally \char`\"{}Documents and Settings/[user]/Local Settings/Application Data/ Last.fm/Client\char`\"{}.

\begin{Desc}
\item[Returns:]Path to log folder. \end{Desc}


The documentation for this class was generated from the following files:\begin{CompactItemize}
\item 
ScrobSubmitter.h\item 
ScrobSubmitter.cpp\end{CompactItemize}
